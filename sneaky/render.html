---
title: Renderer Tool
permalink: render
---
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/showdown@1.9.1/dist/showdown.min.js"></script>
<h1>Markdown, MathJax, and TikzJax Renderer</h1>
<form enctype="multipart/form-data">
    <input id="upload" type=file accept="text/md" name="files[]" size=30>
</form>

<script>
    function handleFileSelect(evt) {
        var files = evt.target.files; // FileList object

        // use the 1st file from the list
        f = files[0];

        var reader = new FileReader();
        var converter = new showdown.Converter();
        converter.setOption('tables', true);
        converter.setOption('literalMidWordUnderscores', false);
        converter.setFlavor('github');

        // Closure to capture the file information.
        reader.onload = (function (theFile) {
            return function (e) {
                var text = e.target.result;
                text = text.replace("<tikz>", '<center><sc'+'ript type="text/tikz">\\begin{tikzpicture}[scale=2]');
                text = text.replace("</tikz>", '\\end{tikzpicture}</scr'+'ipt></center>');
                text = converter.makeHtml(text);
                document.body.innerHTML = text;
                document.body.className = "";
                document.title = f.name.replace(".md", ".pdf");
                var stylesheets = document.getElementsByTagName('link'), i, sheet;
                for(i in stylesheets) {
                    sheet = stylesheets[i];
                    if (sheet.parentNode) {
                        if(sheet.getAttribute('type').toLowerCase() == 'text/css')
                            sheet.parentNode.removeChild(sheet);
                    }
                }
                var link = $("<link />",{
                    rel: "stylesheet",
                    type: "text/css",
                    href: "/assets/css/render_style.css"
                });
                $('head').append(link);
                window.dispatchEvent(new CustomEvent("renderrequest"));
                MathJax.typesetPromise();
            };
        })(f);

        // Read in the image file as a data URL.
        reader.readAsText(f);
    }

    document.getElementById('upload').addEventListener('change', handleFileSelect, false);
</script>
